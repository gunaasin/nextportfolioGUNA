"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");
exports.__esModule = true;
exports["default"] = void 0;
var _callfunc = _interopRequireDefault(require("./callfunc.js"));
/**
 * reduce run times.
 */
var throttle = function throttle(func, threshhold, needRunLast) {
  var _threshhold;
  threshhold = (_threshhold = threshhold) !== null && _threshhold !== void 0 ? _threshhold : 250;
  var waiting = false;
  var lastCall = false;
  var run = function run(option) {
    var _ref = option || {},
      args = _ref.args,
      scope = _ref.scope;
    lastCall = false;
    (0, _callfunc["default"])(func, args, scope);
  };
  return function (option) {
    lastCall = true;
    if (!waiting) {
      waiting = true;
      run(option);
      setTimeout(function () {
        waiting = false;
        if (needRunLast && lastCall) {
          run(option);
        }
      }, threshhold);
    }
  };
};
var _default = exports["default"] = throttle;
module.exports = exports.default;