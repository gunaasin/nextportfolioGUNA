import { expect } from "chai";
import { getSinon as sinon } from "reshow-unit-dom";
import throttle from "../throttle.mjs";
describe("Test throttle", function () {
  it("test throttle", function (done) {
    var spy = sinon().spy();
    var run = throttle(spy, 2);
    for (var i = 0; i < 2; i++) {
      setTimeout(function () {
        return run();
      }, i * 1);
    }
    setTimeout(function () {
      expect(spy.callCount).to.equal(1);
      done();
    }, 100);
  });
  it("test throttle with last run", function (done) {
    var spy = sinon().spy();
    var run = throttle(spy, 2, true);
    for (var i = 0; i < 2; i++) {
      setTimeout(function () {
        return run();
      }, i * 1);
    }
    setTimeout(function () {
      expect(spy.callCount).to.equal(2);
      done();
    }, 100);
  });
});