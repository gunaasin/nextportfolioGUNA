"use strict";

var _interopRequireDefault = require("reshow-runtime/helpers/interopRequireDefault");
exports.__esModule = true;
exports["default"] = void 0;
var _callFunc = _interopRequireDefault(require("call-func"));
var _winDoc = require("win-doc");
var aniTimer = function aniTimer(_ref, duration) {
  var isContinue = _ref.isContinue,
    done = _ref.done,
    cancel = _ref.cancel;
  var beginTimeStamp;
  var run = function run(timestamp) {
    beginTimeStamp = beginTimeStamp || timestamp;
    var elapsedTime = timestamp - beginTimeStamp;
    if (elapsedTime < duration) {
      if ((0, _callFunc["default"])(isContinue, [elapsedTime])) {
        (0, _callFunc["default"])((0, _winDoc.win)().requestAnimationFrame, [run]);
      } else {
        (0, _callFunc["default"])(cancel);
      }
    } else {
      (0, _callFunc["default"])(isContinue, [duration]);
      (0, _callFunc["default"])(done);
    }
  };
  (0, _callFunc["default"])((0, _winDoc.win)().requestAnimationFrame, [run]);
};
var _default = aniTimer;
exports["default"] = _default;
module.exports = exports.default;