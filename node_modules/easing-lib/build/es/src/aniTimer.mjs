import callfunc from "call-func";
import { win } from "win-doc";
var aniTimer = function aniTimer(_ref, duration) {
  var {
    isContinue,
    done,
    cancel
  } = _ref;
  var beginTimeStamp;
  var run = function run(timestamp) {
    beginTimeStamp = beginTimeStamp || timestamp;
    var elapsedTime = timestamp - beginTimeStamp;
    if (elapsedTime < duration) {
      if (callfunc(isContinue, [elapsedTime])) {
        callfunc(win().requestAnimationFrame, [run]);
      } else {
        callfunc(cancel);
      }
    } else {
      callfunc(isContinue, [duration]);
      callfunc(done);
    }
  };
  callfunc(win().requestAnimationFrame, [run]);
};
export default aniTimer;